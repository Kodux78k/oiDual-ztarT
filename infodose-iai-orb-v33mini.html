<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Fusion OS — Ultimate Monolith</title>

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="theme-color" content="#000000">

  <!-- FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&family=Space+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <!-- LIBS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            display: ['Space Grotesk', 'sans-serif'],
          },
          colors: {
            dynamic: 'var(--active-color)',
            glass: 'rgba(255, 255, 255, 0.03)',
            'glass-hover': 'rgba(255, 255, 255, 0.06)',
            'glass-border': 'rgba(255, 255, 255, 0.08)',
          },
          animation: {
            'pulse-slow': 'pulse 6s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'float': 'float 8s ease-in-out infinite',
            'boot-fade': 'bootFade 1.2s ease-out forwards',
            'breathe': 'breathe 5s ease-in-out infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            bootFade: {
              '0%': { opacity: '1' },
              '100%': { opacity: '0', pointerEvents: 'none' },
            },
            breathe: {
              '0%, 100%': { opacity: '0.4', transform: 'scale(1)' },
              '50%': { opacity: '0.7', transform: 'scale(1.05)' },
            }
          }
        }
      }
    }
  </script>

  <style>
    :root {
      --bg: #030303;
      --active-color: #E5E5E5; 
      --active-glow: rgba(255, 255, 255, 0.08);
      --accent-secondary: #505050;
    }

    body {
      background: var(--bg);
      color: #fff;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      user-select: none;
      -webkit-font-smoothing: antialiased;
    }

    .bg-noise {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none; z-index: 1; opacity: 0.6; mix-blend-mode: overlay;
    }

    .glass-panel {
      background: rgba(20, 20, 22, 0.6);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
    
    .glass-card {
      background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
      border: 1px solid rgba(255,255,255,0.06);
      backdrop-filter: blur(12px);
      transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    
    .glass-pill {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      backdrop-filter: blur(16px);
    }

    .no-scrollbar::-webkit-scrollbar { display: none; }
    .thin-scroll::-webkit-scrollbar { width: 3px; }
    .thin-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }

    .orb-glow {
      position: absolute; width: 70vw; height: 70vw;
      border-radius: 50%; filter: blur(100px); opacity: 0.08;
      transition: background 1.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 1.5s ease;
      pointer-events: none; z-index: 0;
    }

    #universe-viewport {
      display: flex; width: 300vw; height: 100vh;
      transform: translateX(-100vw);
      transition: transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
      will-change: transform;
      position: relative; z-index: 5;
    }

    .snap-y-mandatory { scroll-snap-type: y mandatory; }
    .snap-start { scroll-snap-align: start; }
    .text-dynamic { color: var(--active-color); transition: color 0.8s ease; }
    
    #boot-screen {
      position: fixed; inset: 0; z-index: 9999;
      background: #000; display: flex; align-items: center; justify-content: center;
      flex-direction: column;
    }
    .loader-line {
      width: 0%; height: 2px; background: var(--active-color);
      box-shadow: 0 0 15px var(--active-color);
      transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1);
    }

    /* ORB SVG TRANSITIONS */
    #orb-svg-container path, 
    #orb-svg-container circle, 
    #orb-svg-container line {
        transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
    }
  </style>
</head>
<body>

  <div class="bg-noise"></div>

  <div id="glow-top" class="orb-glow" style="top: -25%; left: -15%; background: var(--active-color);"></div>
  <div id="glow-bottom" class="orb-glow" style="bottom: -25%; right: -15%; background: var(--accent-secondary); opacity: 0.05;"></div>

  <div id="boot-screen">
    <div class="font-display font-bold text-2xl tracking-[0.25em] mb-6 text-white animate-pulse">FUSION OS</div>
    <div class="w-32 h-[1px] bg-white/10 rounded-full overflow-hidden">
      <div id="boot-bar" class="loader-line"></div>
    </div>
  </div>

  <header class="fixed top-0 left-0 right-0 z-50 px-6 py-8 flex justify-between items-center pointer-events-none select-none">
    <div onclick="Navigation.to(1)" class="glass-pill px-4 py-2 rounded-full flex items-center gap-3 pointer-events-auto cursor-pointer hover:bg-white/5 transition group border-white/5">
      <div id="header-dot" class="w-1.5 h-1.5 rounded-full bg-dynamic shadow-[0_0_12px_var(--active-color)] transition-all duration-700"></div>
      <span id="displayUserHeader" class="font-display font-semibold text-[10px] tracking-[0.15em] text-white/80 uppercase">PILOTO</span>
    </div>
    
    <div class="glass-pill px-4 py-2 rounded-full pointer-events-auto flex items-center gap-3 border-white/5">
      <div id="archetype-badge" onclick="Infodose.open()" class="font-display font-bold text-[10px] tracking-widest text-dynamic cursor-pointer hover:opacity-80 transition">DUAL</div>
      <div class="w-[1px] h-3 bg-white/10"></div>
      <div class="font-mono text-[9px] text-white/30">v28.0</div>
    </div>
  </header>

  <div id="universe-viewport">

    <!-- SCREEN 0: CORTEX -->
    <section class="w-screen h-screen flex-shrink-0 relative overflow-hidden flex flex-col pt-28 px-6 pb-6">
      <div class="max-w-4xl w-full mx-auto h-full flex flex-col">
        <div class="flex items-end justify-between mb-8">
          <div>
            <h2 class="font-display font-bold text-4xl tracking-tighter text-white">Córtex</h2>
          </div>
          <div class="flex bg-white/5 rounded-full p-1">
            <button onclick="Cortex.switch('crystals')" id="tab-crystals" class="px-5 py-2 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all bg-white/10 text-white shadow-lg">Cristais</button>
            <button onclick="Cortex.switch('matrices')" id="tab-matrices" class="px-5 py-2 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all text-white/40 hover:text-white">Matrizes</button>
          </div>
        </div>

        <div id="panel-crystals" class="flex-1 flex flex-col overflow-hidden">
          <div id="crystal-container" class="flex-1 overflow-y-auto thin-scroll space-y-3 pb-24 pr-1"></div>
        </div>

        <div id="panel-matrices" class="hidden flex-1 flex flex-col overflow-hidden">
            <textarea id="matrix-editor" class="flex-1 font-mono text-xs leading-relaxed text-white/70 glass-card p-6 rounded-2xl resize-none outline-none border-white/5" placeholder="// Defina os parâmetros da matriz..."></textarea>
            <button onclick="Cortex.saveActiveMatrix()" class="mt-4 py-4 rounded-xl bg-dynamic/10 text-dynamic text-[10px] font-bold uppercase tracking-widest border border-dynamic/20">Sincronizar Matriz</button>
        </div>
      </div>
    </section>

    <!-- SCREEN 1: NEXUS -->
    <section class="w-screen h-screen flex-shrink-0 relative overflow-hidden">
      <div id="nexus-scroll" class="w-full h-full overflow-y-auto snap-y-mandatory no-scrollbar scroll-smooth">
        
        <div class="w-full h-screen snap-start flex flex-col items-center justify-center relative">
          
          <!-- ORB AREA (NEW SVG INTEGRATED) -->
          <div id="orb-area" class="relative w-80 h-80 flex items-center justify-center cursor-grab active:cursor-grabbing z-10"
               onmousedown="OrbDrag.start(event)" ontouchstart="OrbDrag.start(event)">
            
            <!-- Ambient Halo Reativo -->
            <div id="orb-halo" class="absolute inset-0 rounded-full bg-dynamic opacity-10 blur-[80px] animate-breathe"></div>
            
            <div id="orb-svg-container" class="w-64 h-64 flex items-center justify-center">
                <svg width="240" height="240" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" class="drop-shadow-[0_0_30px_rgba(255,255,255,0.05)]">
                  <defs>
                    <linearGradient id="orbGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                      <stop offset="0%" style="stop-color:var(--active-color); stop-opacity:0.8" />
                      <stop offset="100%" style="stop-color:var(--active-color); stop-opacity:0.2" />
                    </linearGradient>
                  </defs>
                  <!-- Aro Externo -->
                  <circle cx="100" cy="100" r="90" stroke="url(#orbGrad)" stroke-width="1.5" fill="none" class="opacity-40" />
                  <!-- Eixo Central -->
                  <line x1="100" y1="10" x2="100" y2="190" stroke="url(#orbGrad)" stroke-width="2" class="opacity-10" />
                  <!-- Arco de Foco Ativo -->
                  <path id="orb-focus-path" d="M100 10 A90 90 0 0 0 100 190" stroke="url(#orbGrad)" stroke-width="4" fill="none" class="drop-shadow-[0_0_15px_var(--active-color)]" />
                  <!-- Core Dot -->
                  <circle cx="100" cy="100" r="3" fill="var(--active-color)" class="opacity-80 shadow-[0_0_10px_var(--active-color)]" />
                </svg>
            </div>
          </div>

          <div class="text-center z-20 mt-10">
            <h1 id="hero-title" class="font-display font-black text-8xl tracking-tighter text-white opacity-90 scale-y-90">DUAL</h1>
            <div class="flex items-center justify-center gap-4 mt-6 opacity-40">
              <div class="h-[1px] w-12 bg-white/40"></div>
              <span id="archetype-status-text" class="font-mono text-[9px] uppercase tracking-[0.4em] text-white">Standby</span>
              <div class="h-[1px] w-12 bg-white/40"></div>
            </div>
          </div>

          <div class="absolute bottom-10 animate-bounce opacity-20">
            <i data-lucide="chevron-down" class="w-5 h-5 text-white"></i>
          </div>
        </div>

        <!-- STATUS SECTION -->
        <div class="w-full h-screen snap-start flex items-center justify-center px-6 relative bg-gradient-to-t from-black to-transparent">
          <div class="max-w-4xl w-full grid grid-cols-2 gap-4">
            <div class="glass-card p-8 rounded-2xl hover:bg-white/5 transition col-span-2 flex flex-col items-center text-center justify-center py-16 border-white/5">
              <p id="drk-quote" class="font-display text-2xl font-light italic text-white/80 leading-relaxed max-w-lg">
                "O silêncio não é vazio. É cheio de respostas."
              </p>
              <div class="flex items-center gap-2 mt-8 opacity-60">
                <span class="text-[9px] font-mono uppercase tracking-[0.25em] text-dynamic">Frequência Sincronizada</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SCREEN 2: DUALTUBE -->
    <section class="w-screen h-screen flex-shrink-0 relative overflow-hidden flex flex-col pt-28 px-6">
        <div class="max-w-4xl mx-auto w-full">
            <h2 class="font-display font-black text-4xl text-white tracking-tighter mb-12">DualTube</h2>
            <div id="video-list" class="space-y-12 pb-32"></div>
        </div>
    </section>

  </div>

  <div class="fixed bottom-8 left-1/2 -translate-x-1/2 z-40 flex gap-3 p-3 bg-black/30 backdrop-blur-xl rounded-full border border-white/5">
    <div id="dot-0" class="w-1.5 h-1.5 rounded-full bg-white/20 transition-all"></div>
    <div id="dot-1" class="w-8 h-1.5 rounded-full bg-dynamic shadow-[0_0_12px_var(--active-color)] transition-all"></div>
    <div id="dot-2" class="w-1.5 h-1.5 rounded-full bg-white/20 transition-all"></div>
  </div>

  <div id="generic-modal" class="fixed inset-0 z-[70] bg-black/80 backdrop-blur-lg hidden items-center justify-center p-4 transition-all opacity-0">
    <div id="generic-modal-content" class="glass-panel w-full max-w-lg rounded-2xl p-8 transform scale-95 transition-all"></div>
  </div>

  <div id="toast-container" class="fixed bottom-24 left-1/2 -translate-x-1/2 z-[80] pointer-events-none flex flex-col gap-2 items-center"></div>

  <script>
    const KEYS = { CORTEX: 'fusion_cortex_v2', ARCHETYPE: 'fusion_archetype', USER: 'fusion_user_name' };

    const ARCHETYPES = {
      "ATLAS": { color: "#38BDF8", quote: "A estrutura precede o sucesso.", desc: "Ordem & Construção" },
      "NOVA": { color: "#F97316", quote: "Itere rápido, falhe rápido, vença.", desc: "Inovação & Fluxo" },
      "VITALIS": { color: "#22C55E", quote: "O corpo sabe antes da mente duvidar.", desc: "Vitalidade & Força" },
      "ARTEMIS": { color: "#A855F7", quote: "Defina o alvo. O resto é ruído.", desc: "Foco & Caça" },
      "SERENA": { color: "#06B6D4", quote: "No centro do furacão, existe um ponto imóvel.", desc: "Paz & Harmonia" }
    };

    let STATE = {
      screen: 1,
      activeArch: null,
      cortex: { crystals: [] }
    };

    window.onload = () => {
      const bar = document.getElementById('boot-bar');
      setTimeout(() => bar.style.width = '100%', 100);
      setTimeout(() => {
        document.getElementById('boot-screen').classList.add('animate-boot-fade');
        initSystem();
      }, 1400);
    };

    function initSystem() {
      lucide.createIcons();
      loadData();
      ArchetypeSystem.apply(STATE.activeArch, false);
      Cortex.render();
      DualTube.render();
      
      // Welcome Toast + TTS
      setTimeout(() => {
        const name = localStorage.getItem(KEYS.USER) || 'Piloto';
        const msg = STATE.activeArch ? `Bem-vindo, ${name}. Arquétipo ${STATE.activeArch} ativo.` : `Bem-vindo, ${name}. Sistema em modo neutro.`;
        Toast.show(msg);
        if ('speechSynthesis' in window) {
           const u = new SpeechSynthesisUtterance(msg);
           u.lang = 'pt-BR'; u.rate = 1.1; u.volume = 0.4;
           window.speechSynthesis.speak(u);
        }
      }, 1000);
    }

    function loadData() {
      const c = localStorage.getItem(KEYS.CORTEX);
      STATE.cortex = c ? JSON.parse(c) : { crystals: [{id:1, txt:"Fusion OS Inicializado.", tags:["sys"]}] };
      STATE.activeArch = localStorage.getItem(KEYS.ARCHETYPE) || null;
    }

    const Navigation = {
      to: (idx) => {
        STATE.screen = idx;
        document.getElementById('universe-viewport').style.transform = `translateX(-${idx * 100}vw)`;
        [0,1,2].forEach(i => {
          document.getElementById(`dot-${i}`).className = i === idx ? "w-8 h-1.5 rounded-full bg-dynamic shadow-[0_0_10px_var(--active-color)] transition-all" : "w-1.5 h-1.5 rounded-full bg-white/20 transition-all";
        });
      }
    };

    const ArchetypeSystem = {
      apply: (key, notify = true) => {
        STATE.activeArch = key;
        const data = ARCHETYPES[key] || { color: "#E5E5E5", quote: "O silêncio não é vazio. É cheio de respostas.", desc: "Standby" };
        
        const r = document.querySelector(':root');
        r.style.setProperty('--active-color', data.color);
        
        document.getElementById('archetype-badge').innerText = key || "DUAL";
        document.getElementById('hero-title').innerText = key || "DUAL";
        document.getElementById('drk-quote').innerText = `"${data.quote}"`;
        document.getElementById('archetype-status-text').innerText = data.desc;
        
        if(key) localStorage.setItem(KEYS.ARCHETYPE, key);
        else localStorage.removeItem(KEYS.ARCHETYPE);
        
        if(notify) Toast.show(key ? `Sincronizado: ${key}` : "Modo Dual Ativo");
      }
    };

    const Infodose = {
      open: () => {
        const html = `
          <h3 class="font-display font-bold text-xl text-white mb-6">Arquétipos</h3>
          <div class="grid gap-3 mb-8">
            <div onclick="ArchetypeSystem.apply(null); Modal.close()" class="p-4 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition">
                <span class="text-xs font-bold text-white/50 uppercase">Modo Dual (Neutro)</span>
            </div>
            ${Object.keys(ARCHETYPES).map(k => `
              <div onclick="ArchetypeSystem.apply('${k}'); Modal.close()" class="p-4 rounded-xl bg-white/5 border-l-4 border-l-[${ARCHETYPES[k].color}] border-white/10 cursor-pointer hover:bg-white/10 transition flex justify-between items-center">
                <span class="text-xs font-bold text-white uppercase tracking-wider">${k}</span>
                <span class="text-[9px] text-white/30 uppercase">${ARCHETYPES[k].desc}</span>
              </div>
            `).join('')}
          </div>
          <button onclick="Modal.close()" class="w-full py-4 glass-card rounded-xl text-[10px] font-bold uppercase tracking-widest text-white/40">Voltar</button>
        `;
        Modal.open(html);
      }
    };

    const Cortex = {
      switch: (v) => {
        document.getElementById('panel-crystals').classList.toggle('hidden', v !== 'crystals');
        document.getElementById('panel-matrices').classList.toggle('hidden', v !== 'matrices');
        document.getElementById('tab-crystals').classList.toggle('bg-white/10', v === 'crystals');
        document.getElementById('tab-matrices').classList.toggle('bg-white/10', v === 'matrices');
      },
      render: () => {
        const container = document.getElementById('crystal-container');
        container.innerHTML = STATE.cortex.crystals.map(c => `
          <div class="glass-card p-5 rounded-xl border-white/5">
            <p class="text-xs text-white/70 leading-relaxed font-sans">${c.txt}</p>
          </div>
        `).join('');
      },
      saveActiveMatrix: () => {
          Toast.show("Matriz Sincronizada");
      }
    };

    const DualTube = {
      render: () => {
        const container = document.getElementById('video-list');
        const ids = ["Bt_rLbMjJDk", "qldgs0aLdB0", "_0wVkryxanE"];
        container.innerHTML = ids.map(id => `
          <div class="glass-card aspect-video rounded-2xl overflow-hidden group cursor-pointer border-white/5 relative">
            <img src="https://img.youtube.com/vi/${id}/mqdefault.jpg" class="w-full h-full object-cover opacity-40 group-hover:scale-105 transition duration-700">
            <div class="absolute inset-0 flex items-center justify-center">
               <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center backdrop-blur-md border border-white/10 group-hover:bg-dynamic group-hover:text-black transition">
                 <i data-lucide="play" class="w-4 h-4 fill-current ml-1"></i>
               </div>
            </div>
          </div>
        `).join('');
        lucide.createIcons();
      }
    };

    const OrbDrag = {
      active: false, startX: 0, el: null,
      start: function(e) {
        this.active = true;
        this.startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
        this.el = document.getElementById('orb-area');
        const move = (ev) => {
          if(!this.active) return;
          const x = ev.type.includes('mouse') ? ev.clientX : ev.touches[0].clientX;
          const delta = (x - this.startX) / 8;
          this.el.style.transform = `translateX(${delta}px) rotate(${delta/2}deg)`;
        };
        const end = () => {
          this.active = false;
          const matrix = new DOMMatrix(window.getComputedStyle(this.el).transform);
          if(matrix.m41 > 60 && STATE.screen > 0) Navigation.to(STATE.screen - 1);
          else if(matrix.m41 < -60 && STATE.screen < 2) Navigation.to(STATE.screen + 1);
          this.el.style.transform = 'none';
          document.removeEventListener('mousemove', move);
          document.removeEventListener('mouseup', end);
          document.removeEventListener('touchmove', move);
          document.removeEventListener('touchend', end);
        };
        document.addEventListener('mousemove', move);
        document.addEventListener('mouseup', end);
        document.addEventListener('touchmove', move);
        document.addEventListener('touchend', end);
      }
    };

    const Modal = {
      open: (h) => {
        const m = document.getElementById('generic-modal');
        document.getElementById('generic-modal-content').innerHTML = h;
        m.classList.replace('hidden', 'flex');
        setTimeout(() => m.classList.replace('opacity-0', 'opacity-100'), 10);
      },
      close: () => {
        const m = document.getElementById('generic-modal');
        m.classList.replace('opacity-100', 'opacity-0');
        setTimeout(() => m.classList.replace('flex', 'hidden'), 300);
      }
    };

    const Toast = {
      show: (m) => {
        const c = document.getElementById('toast-container');
        const e = document.createElement('div');
        e.className = "glass-pill px-6 py-3 rounded-full text-[10px] font-bold uppercase tracking-widest text-dynamic shadow-2xl border border-dynamic/20 mb-2 animate-bounce";
        e.innerText = m;
        c.appendChild(e);
        setTimeout(() => { e.style.opacity = '0'; setTimeout(()=>e.remove(), 500); }, 3000);
      }
    };
  </script>
</body>
</html>

